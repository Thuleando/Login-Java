<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="Logout_SP" directorySegmentName="seg_0" id="1E1E3FD3-9BA8-1A24-9853-4B729DB4E760">
<createdBy>Jason</createdBy>
<createdTime>2014-11-20 18:14:51 UTC</createdTime>
<ownerDesignName>Login_Authenticator2</ownerDesignName>
<source>CREATE OR REPLACE PROCEDURE Logout_SP &lt;br/&gt;(&lt;br/&gt;  USERNAME_IN IN VARCHAR2 &lt;br/&gt;, RESULT      OUT NUMBER &lt;br/&gt;) &lt;br/&gt;IS &lt;br/&gt;&lt;br/&gt;Active_Login INTEGER;&lt;br/&gt;Active_ID    Accounts.ID%TYPE;&lt;br/&gt;&lt;br/&gt;BEGIN&lt;br/&gt;&lt;br/&gt;SELECT ID INTO Active_ID FROM Accounts WHERE Username = Username_In;&lt;br/&gt;&lt;br/&gt;SELECT COUNT(Sessions.Accounts_Id) INTO Active_Login FROM Sessions&lt;br/&gt;  WHERE WhenTerminated IS NULL &lt;br/&gt;  AND Accounts_Id = Active_ID;&lt;br/&gt;                        &lt;br/&gt;IF Active_Login = 0 THEN&lt;br/&gt;  Result := 2;&lt;br/&gt;ELSE&lt;br/&gt;  Result := 1;&lt;br/&gt;  UPDATE Sessions SET WhenTerminated = LOCALTIMESTAMP &lt;br/&gt;  WHERE Accounts_ID = Active_ID&lt;br/&gt;  AND WhenTerminated IS NULL;&lt;br/&gt;  &lt;br/&gt;END IF;&lt;br/&gt;&lt;br/&gt;  NULL;&lt;br/&gt;END LOGOUT_SP;</source>
<body>CREATE OR REPLACE PROCEDURE Logout_SP &lt;br/&gt;(&lt;br/&gt;  USERNAME_IN IN VARCHAR2 &lt;br/&gt;, RESULT      OUT NUMBER &lt;br/&gt;) &lt;br/&gt;IS &lt;br/&gt;&lt;br/&gt;Active_Login INTEGER;&lt;br/&gt;Active_ID    Accounts.ID%TYPE;&lt;br/&gt;&lt;br/&gt;BEGIN&lt;br/&gt;&lt;br/&gt;SELECT ID INTO Active_ID FROM Accounts WHERE Username = Username_In;&lt;br/&gt;&lt;br/&gt;SELECT COUNT(Sessions.Accounts_Id) INTO Active_Login FROM Sessions&lt;br/&gt;  WHERE WhenTerminated IS NULL &lt;br/&gt;  AND Accounts_Id = Active_ID;&lt;br/&gt;                        &lt;br/&gt;IF Active_Login = 0 THEN&lt;br/&gt;  Result := 2;&lt;br/&gt;ELSE&lt;br/&gt;  Result := 1;&lt;br/&gt;  UPDATE Sessions SET WhenTerminated = LOCALTIMESTAMP &lt;br/&gt;  WHERE Accounts_ID = Active_ID&lt;br/&gt;  AND WhenTerminated IS NULL;&lt;br/&gt;  &lt;br/&gt;END IF;&lt;br/&gt;&lt;br/&gt;  NULL;&lt;br/&gt;END LOGOUT_SP;</body>
</StoredProcedureOraclev10g>